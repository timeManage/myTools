<h1 id="history">history</h1>
<p>用于显示历史命令</p>
<h2 id="补充说明">补充说明</h2>
<p><strong>history命令</strong> 用于显示指定数目的指令命令，读取历史命令文件中的目录到历史命令缓冲区和将历史命令缓冲区中的目录写入命令文件。</p>
<p>该命令单独使用时，仅显示历史命令，在命令行中，可以使用符号<code>!</code>执行指定序号的历史命令。例如，要执行第2个历史命令，则输入<code>!2</code>。</p>
<p>历史命令是被保存在内存中的，当退出或者登录shell时，会自动保存或读取。在内存中，历史命令仅能够存储1000条历史命令，该数量是由环境变量<code>HISTSIZE</code>进行控制。</p>
<h3 id="语法">语法</h3>
<pre class="language-"><code class="language-shell">history<span class="token punctuation">(</span>选项<span class="token punctuation">)</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span></code></pre>
<h3 id="选项">选项</h3>
<pre class="language-"><code class="language-shell">-c：清空当前历史命令；
-a：将历史命令缓冲区中命令写入历史命令文件中；
-r：将历史命令文件中的命令读入当前历史命令缓冲区；
-w：将当前历史命令缓冲区命令写入历史命令文件中。</code></pre>
<h3 id="参数">参数</h3>
<p>n：打印最近的n条历史命令。</p>
<h3 id="实例">实例</h3>
<p>使用history命令显示最近使用的10条历史命令，输入如下命令：</p>
<pre class="language-"><code class="language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># history 10</span>
   <span class="token number">92</span>  <span class="token function">ls</span>
   <span class="token number">93</span>  <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>
   <span class="token number">94</span>  <span class="token function">ls</span>
   <span class="token number">95</span>  <span class="token builtin class-name">exit</span>
   <span class="token number">96</span>  <span class="token function">ls</span> -a
   <span class="token number">97</span>  <span class="token builtin class-name">cd</span> .ssh/
   <span class="token number">98</span>  <span class="token function">ls</span>
   <span class="token number">99</span>  <span class="token function">cat</span> known_hosts
  <span class="token number">100</span>  <span class="token builtin class-name">exit</span>
  <span class="token number">101</span>  <span class="token function">history</span> <span class="token number">10</span></code></pre>
<p>列出最近3条记录</p>
<pre class="language-"><code class="language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># history 3</span>
   <span class="token number">15</span>  <span class="token number">2017</span>-08-26 <span class="token number">11</span>:44:35  root <span class="token function">history</span> <span class="token number">3</span>
   <span class="token number">16</span>  <span class="token number">2017</span>-08-26 <span class="token number">11</span>:44:37  root <span class="token function">history</span> n
   <span class="token number">17</span>  <span class="token number">2017</span>-08-26 <span class="token number">11</span>:44:40  root <span class="token function">history</span> <span class="token number">3</span></code></pre>
<p>清空历史记录</p>
<pre class="language-"><code class="language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># history -c</span></code></pre>
<p>更多实例:</p>
<pre class="language-"><code class="language-shell"><span class="token function">history</span> -cw
<span class="token variable"><span class="token variable">`</span>~/.bash_history<span class="token variable">`</span></span><span class="token builtin class-name">:</span> 保存历史命令
<span class="token variable"><span class="token variable">`</span>/etc/profile<span class="token variable">`</span></span> -<span class="token operator">></span> HISSIZE: 历史命令保存数量
推荐添加 h -<span class="token operator">></span> history, hsi -<span class="token operator">></span> <span class="token function">history</span><span class="token operator">|</span><span class="token function">grep</span> 别名
<span class="token variable"><span class="token variable">`</span><span class="token operator">!</span>n<span class="token variable">`</span></span><span class="token builtin class-name">:</span> 执行第 n 条历史命令
<span class="token variable"><span class="token variable">`</span><span class="token operator">!</span>xxx<span class="token variable">`</span></span><span class="token builtin class-name">:</span> 执行最后一条 xxx 开头的命令</code></pre>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
