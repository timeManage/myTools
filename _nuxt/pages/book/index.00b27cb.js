(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{546:function(t,e,n){"use strict";n.r(e);n(266),n(38);var o={head:function(){return{title:"日常用到的小工具-小说搜索阅读",link:[{rel:"stylesheet",href:"./css/book/index.css"}]}},data:function(){return{value:"",books:[{title:"书名",render:function(t,e){return t("span",e.row.name.bookName)}},{title:"最新章节",render:function(t,e){return t("span",e.row.new.articleName)}},{title:"作者",key:"author"},{title:"最近更新",key:"date"}],list:[],info:"",articleName:"",content:"",nextArticleLink:"",left:!1,right:!1,loading:!0}},mounted:function(){},methods:{enter:function(){var t=this,e=t.value.trim();e?t.$axios.get("myTools/api/search",{params:{searchkey:e}}).then((function(e){console.log(t.list),e.data&&(t.list=e.data)})):t.list.length=0},onRowClick:function(t,e){var n=this;this.$axios.get("myTools/api/info",{params:{link:t.name.link}}).then((function(t){console.log(t.data),t.data.bookName&&(n.info=t.data,n.right=!0)}))},getContent:function(link){var t=this;this.$axios.get("myTools/api/article",{params:{link:link},timeout:1e4}).then((function(e){console.log(e.data),e.data&&(t.articleName=e.data.articleName,t.loading?t.content=e.data.articleContent:t.content+=e.data.articleContent,t.nextArticleLink=e.data.nextArticleLink,t.$nextTick((function(){t.$refs.book.addEventListener("scroll",t.handleScroll,!1),t.$refs.book.addEventListener("resize",t.handleScroll,!1)})),t.loading=!0)}))},onMouseMove:function(t){t.clientX<2&&(this.left=!0)},handleScroll:function(t){this.loading&&t.target.scrollHeight-t.target.clientHeight-t.target.scrollTop<300&&(this.loading=!1,this.getContent(this.nextArticleLink))},dblclick:function(){this.right=!0}}},l=n(39),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"book",staticClass:"book",on:{dblclick:t.dblclick,mousemove:t.onMouseMove}},[t.content?n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16",id:"articleName"}},[n("p",[t._v(t._s(t.articleName))])]),t._v(" "),n("Col",{attrs:{id:"content",span:"16"},domProps:{innerHTML:t._s(t.content)}})],1):t._e(),t._v(" "),n("Drawer",{attrs:{title:"输入书名或作者名",placement:"left",closable:!1,width:"40"},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}},[n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("Input",{attrs:{placeholder:"输入书名或作者名",size:"large",autofocus:""},on:{"on-enter":t.enter},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),t.list.length>0?n("Table",{attrs:{columns:t.books,data:t.list},on:{"on-row-click":t.onRowClick}}):t._e()],1)],1)],1),t._v(" "),n("Drawer",{attrs:{title:"小说目录",placement:"right",closable:!1,width:"25"},model:{value:t.right,callback:function(e){t.right=e},expression:"right"}},[n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("Card",{attrs:{bordered:!1}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.info.bookName))]),t._v(" "),n("Row",[n("Col",{attrs:{span:"8"}},[n("img",{staticClass:"cover",attrs:{src:t.info.cover,alt:""}})]),t._v(" "),n("Col",{attrs:{span:"16"}},[n("p",[t._v(t._s(t.info.author))]),t._v(" "),n("p",[t._v(t._s(t.info.date))]),t._v(" "),n("p",[t._v("最新章节："+t._s(t.info.newArticle))])])],1)],1)],1),t._v(" "),n("Col",{attrs:{span:"22"}},t._l(t.info.list,(function(e,o){return n("p",{key:o,staticClass:"ivu-select-item",on:{click:function(n){return t.getContent(e.link)}}},[t._v(t._s(e.name))])})),0)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);