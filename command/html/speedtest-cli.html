<h1 id="speedtest-cli">speedtest-cli</h1>
<p>命令行下测试服务器外网速度</p>
<h2 id="补充说明">补充说明</h2>
<p><strong>speedtest-cli</strong> 是一个使用python编写的命令行脚本，通过调用speedtest.net测试上下行的接口来完成速度测试，最后我会测试运维生存时间所在服务器的外网速度。项目地址：<a href="https://github.com/sivel/speedtest-cli">https://github.com/sivel/speedtest-cli</a></p>
<h3 id="安装speedtest－cli">安装speedtest－cli</h3>
<p>speedtest-cli需要在python 2.4-3.4的环境下，安装方法都很简单，自己选择以下最适合你的一种。</p>
<p> <strong>pip方式</strong> </p>
<pre class="language-"><code class="language-shell">＃ pip <span class="token function">install</span> speedtest－cli</code></pre>
<p> <strong>easy_install方式</strong> </p>
<pre class="language-"><code class="language-shell">＃ easy_install speedtest-cli</code></pre>
<p> <strong>github＋pip方式</strong> </p>
<pre class="language-"><code class="language-shell">＃ pip <span class="token function">install</span> git+https://github.com/sivel/speedtest-cli.git</code></pre>
<p>或者</p>
<pre class="language-"><code class="language-shell">＃ <span class="token function">git</span> clone https://github.com/sivel/speedtest-cli.git
＃ python speedtest-cli/setup.py <span class="token function">install</span></code></pre>
<p> <strong>下载脚本方式</strong> </p>
<pre class="language-"><code class="language-shell">＃ <span class="token function">wget</span> -O speedtest-cli https://raw.github.com/sivel/spe <span class="token punctuation">..</span>. er/speedtest_cli.py
＃ <span class="token function">chmod</span> +x speedtest-cli</code></pre>
<p>或者</p>
<pre class="language-"><code class="language-shell">＃ <span class="token function">curl</span> -o speedtest-cli https://raw.github.com/sivel/spe <span class="token punctuation">..</span>. er/speedtest_cli.py
＃ <span class="token function">chmod</span> +x speedtest-cli</code></pre>
<p>直接下载脚本，给予执行权限即可。</p>
<h3 id="用法">用法</h3>
<pre class="language-"><code class="language-shell">-h, --help       show this <span class="token builtin class-name">help</span> message and <span class="token builtin class-name">exit</span>
--share          分享你的网速，该命令会在speedtest网站上生成网速测试结果的图片。
--simple         Suppress verbose output, only show basic information
--list           根据距离显示speedtest.net的测试服务器列表。
--server<span class="token operator">=</span>SERVER  指定列表中id的服务器来做测试。
--mini<span class="token operator">=</span>MINI      URL of the Speedtest Mini server
--source<span class="token operator">=</span>SOURCE  Source <span class="token function">ip</span> address to <span class="token builtin class-name">bind</span> to
--version        Show the version number and <span class="token builtin class-name">exit</span></code></pre>
<h3 id="实例">实例</h3>
<p>列出所有在中国的测试服务器：</p>
<pre class="language-"><code class="language-shell"><span class="token punctuation">[</span>root@li229-122 ~<span class="token punctuation">]</span><span class="token comment"># speedtest-cli --list | grep China</span>
<span class="token number">1185</span><span class="token punctuation">)</span> China Unicom <span class="token punctuation">(</span>Changchun, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">10534.35</span> km<span class="token punctuation">]</span>
<span class="token number">3784</span><span class="token punctuation">)</span> China Mobile <span class="token punctuation">(</span>Urumqi, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">10581.15</span> km<span class="token punctuation">]</span>
<span class="token number">2667</span><span class="token punctuation">)</span> Beijing Normal University <span class="token punctuation">(</span>Beijing, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11117.03</span> km<span class="token punctuation">]</span>
<span class="token number">2529</span><span class="token punctuation">)</span> Beijing Normal University <span class="token punctuation">(</span>Beijing, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11117.03</span> km<span class="token punctuation">]</span>
<span class="token number">2816</span><span class="token punctuation">)</span> Capital Online Data <span class="token function">service</span> <span class="token punctuation">(</span>Beijing, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11117.03</span> km<span class="token punctuation">]</span>
<span class="token number">4354</span><span class="token punctuation">)</span> SXmobile <span class="token punctuation">(</span>Taiyuan, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11383.17</span> km<span class="token punctuation">]</span>
<span class="token number">3973</span><span class="token punctuation">)</span> China Telecom <span class="token punctuation">(</span>Lanzhou, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11615.43</span> km<span class="token punctuation">]</span>
<span class="token number">3633</span><span class="token punctuation">)</span> China Telecom <span class="token punctuation">(</span>Shanghai, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11983.37</span> km<span class="token punctuation">]</span>
<span class="token number">3927</span><span class="token punctuation">)</span> China Mobile Jiangsu Co., Ltd. <span class="token punctuation">(</span>Suzhou, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11989.27</span> km<span class="token punctuation">]</span>
<span class="token number">2461</span><span class="token punctuation">)</span> China Unicom <span class="token punctuation">(</span>Chengdu, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">12213.35</span> km<span class="token punctuation">]</span>
<span class="token number">1028</span><span class="token punctuation">)</span> Shepherd Software <span class="token punctuation">(</span>Xiamen, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">12785.57</span> km<span class="token punctuation">]</span>
<span class="token number">1628</span><span class="token punctuation">)</span> Xiamen Guangdian Xinxu <span class="token punctuation">(</span>Xiamen, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">12785.57</span> km<span class="token punctuation">]</span>
<span class="token number">3891</span><span class="token punctuation">)</span> GZinternet <span class="token punctuation">(</span>Guangzhou, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">13005.36</span> km<span class="token punctuation">]</span>
<span class="token number">3871</span><span class="token punctuation">)</span> SZWCDMA <span class="token punctuation">(</span>Shenzhen, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">13059.20</span> km<span class="token punctuation">]</span>
<span class="token number">3819</span><span class="token punctuation">)</span> SZU <span class="token punctuation">(</span>Shenzhen, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">13059.20</span> km<span class="token punctuation">]</span>
<span class="token number">1536</span><span class="token punctuation">)</span> STC <span class="token punctuation">(</span>Hong Kong, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">13088.37</span> km<span class="token punctuation">]</span>
<span class="token number">1890</span><span class="token punctuation">)</span> Telin <span class="token punctuation">(</span>Hong Kong, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">13088.37</span> km<span class="token punctuation">]</span></code></pre>
<p> <strong>结果解释</strong> </p>
<pre class="language-"><code class="language-shell"><span class="token number">3633</span><span class="token punctuation">)</span> China Telecom <span class="token punctuation">(</span>Shanghai, China<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11983.37</span> km<span class="token punctuation">]</span></code></pre>
<pre class="language-"><code class="language-shell"><span class="token number">3633</span>: 服务器id
china telecom：isp，这里是中国电信
shanghai,china ：服务器所在地址
<span class="token number">11983.37</span> km：两台服务器地理位置之间距离，我这台机器在美国，和上海相距11983.37公里，很远呐.</code></pre>
<p> <strong>外网速度测试</strong> </p>
<pre class="language-"><code class="language-shell"><span class="token punctuation">[</span>root@li229-122 ~<span class="token punctuation">]</span><span class="token comment"># speedtest-cli --server=3633 --share</span>
Retrieving speedtest.net configuration<span class="token punctuation">..</span>.
Retrieving speedtest.net server list<span class="token punctuation">..</span>.
Testing from Linode <span class="token punctuation">(</span><span class="token number">173.255</span>.219.122<span class="token punctuation">)</span><span class="token punctuation">..</span>.
Hosted by China Telecom <span class="token punctuation">(</span>Shanghai<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">11983.37</span> km<span class="token punctuation">]</span>: <span class="token number">23.603</span> ms
Testing download speed<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Download: <span class="token number">24.84</span> Mbit/s
Testing upload speed<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Upload: <span class="token number">4.57</span> Mbit/s
Share results: http://www.speedtest.net/result/3240988007.png</code></pre>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->